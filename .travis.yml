sudo: required
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
env:
  global:
  - secure: 3HVq4gqdkmIxjma8AjfdWkY44rK/ddvUMvzukLDRkee67F3+fTOPmjyDNEgK/qNXT0YJgNzqtLEh3D6Kb5jRXzKHQnufFAzNPIVGIhHMj1CBuJBTX1bGd3n3DUUMRq//ZfUTbheumgAtSlDP6WQlD/63qZJ+GMlTIprUsIMhRqvNl0dxEPmxD2wYOFdWzmBSvgSP3WXCOhx4j/tgtt7Ij8E/r1jWWhZRPN6cANGJmYKPjvcLvpKfwwvHRDz+OzTNYDuBHZVwdNf1ykKYdn4trpQMpvVons17qDu20q7FyZ0WdrP/J6yeujINlRjO3+0exD9zEYawRLv/0/BmwZXIQ/JrZgB741PIgGUV/gwMYBFpAaJO/NJ2VH1NCYD4YiOa/0qJhSAlqYSOsJT33+wCDimAXrs8j7DLe24KWA896HsmaI+wK+9mLul1VRq4v7gSMLrPhN2rXuUOchQhCyWAdqHRaZvAo6DpN+QgeO8XnffY73A8yaQGu6bmiW2ig8QY0TSjojSG8CM2f3qBwiP3t0J1PPraGwxkJD9TbUIA5K3uhRieuQu/lvnj3oRvCk++e92vmW18GohIjAOoI2AJDhwc4AM3xoUcdEQV3g8EcJzRyqGfKMoHwzI70Qfh7KxQkmyzDRo98VSQzjNcY0KoM4BnGYLxCVH6i+2zcLz5KXI=
  - secure: Tnk0TSH1VbP2MxHbYvpcS39N/OV35xjy/Ouj+H/c/XItzCMWebpuX4rR36Y1D7Vu9TbqD20n8Fn6ftfM+e0vViv92wh6od1nMukfuVB58lmjNpCZ3S3Z7Vn0pa6c8FlWbmB1UVRWvG3Y5jnNtGblfRyg6TBd0Radw6+/D3/Zo+5CLXchxm2lr8FOVHsqS/Ki4JBewtdQhkNTAZY5eypGacmBG4aNx6XWMSUGQSHraNEoOQucO+34HBf7llRshh1IKFBGwigEMsYfLaJkuXUrW+Fdgoy8S5RrM2WTzcnSINdNTQ3iCAfW09l4I8H0u6HZrqTf0cJZd2QF45qTF7bW9x9BuZ5sf2vij3z3P/AoJxH3qMjidLfxeKPORLgPOTpA4jGCqX9idzF6wxAKL6NEAh1sjpxAHtfRROFa36UYx07mOFAmOlzi+Q4ZoDRY3XD49wvB/GGI/LICWG6u4zEjA0juhoNO6cD6pVBda5H3dD3VbE9+vxT39uN98Tt6fQQ6z/45UVx2DuVRrF9n0XpQYEyLyTdQhR/NgtB6AmH/dJz8gdiTqJdzVLUFjD7BmCmlhXe69/mI/e5MVjgC+dzn5hnqKVCsezQ+j2USM0ScZA6JHTw1Rh+fNbQ41vNL3vdfUZX+lDV22MK6O4F/k5NpB0SJ3c6gT3/CVDO8SiU6nO4=
